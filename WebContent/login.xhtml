<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Simple School Admin</title>

    <h:outputStylesheet library="components"
                        name="bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <h:outputStylesheet library="css" name="style.css" rel="stylesheet"
                        type="text/css"/>
    <h:outputStylesheet name="login.css" library="css"/>

    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"></link>

    <f:metadata>
        <f:event type="preRenderView" listener="#{authBean.redirectIfLogged}"/>
    </f:metadata>
</h:head>

<h:body>
    <div class="login-container vertical-align-center">
        <div class="col-xs-offset-1 col-xs-10 col-sm-offset-3 col-sm-7 col-md-offset-4 col-md-4">
            <h:graphicImage library="images" name="login/logo.png"/>
            <h:form id="loginForm" styleClass="login" prependId="false">
                <div jsf:id="panel">
                    <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                    <fieldset>
                        <legend class="legend">Simple School Admin</legend>
                        <div class="input">
                            <h:inputText id="loginUser" pt:placeholder="Usuário" value="#{authBean.userName}"
                                         required="true" requiredMessage="Digite o login do usuário"/>
                            <span><i class="fa fa-envelope-o"/></span>
                        </div>
                        <div class="input">
                            <h:inputSecret id="loginPassword" pt:placeholder="Senha" required="true"
                                           value="#{authBean.password}"
                                           requiredMessage="Digite a senha do usuário"/>
                            <span><i class="fa fa-lock"/></span>
                        </div>

                        <p:commandButton value="" action="#{authBean.login}" styleClass="submit"
                                         oncomplete="handleComplete(xhr,status,args)" icon="fa fa-long-arrow-right"
                                         update="panel"/>

                    </fieldset>

                    <div jsf:id="feedBack" class="feedback">
                        <h:messages showDetail="true" showSummary="true"/>
                    </div>
                </div>
            </h:form>
        </div>
    </div>

    <h:outputScript library="components" name="jquery/jquery.min.js"
                    target="body"/>
    <h:outputScript library="components" name="bootstrap/bootstrap.min.js"
                    target="body"/>
    <h:outputScript library="js" name="login.js" target="body"/>

</h:body>
</html>